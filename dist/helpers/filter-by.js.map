{"version":3,"file":"filter-by.js","sources":["../../src/helpers/filter-by.ts"],"sourcesContent":["import { helper } from '@ember/component/helper';\nimport { isArray as isEmberArray } from '@ember/array';\nimport { isEmpty } from '@ember/utils';\nimport { get } from '@ember/object';\nimport isEqual from '../utils/is-equal.ts';\nimport asArray from '../utils/as-array.ts';\n\nexport function filterBy<T extends object, K extends keyof T>([\n  byPath,\n  value,\n  array,\n]: [K, T[K] | T[] | undefined, T[]]) {\n  let isPresent = true;\n  if (!isEmberArray(array) && isEmberArray(value)) {\n    array = value as T[];\n    value = undefined;\n    isPresent = false;\n  }\n\n  array = asArray(array);\n\n  if (isEmpty(byPath) || isEmpty(array)) {\n    return [];\n  }\n\n  let filterFn;\n\n  if (isPresent) {\n    if (typeof value === 'function') {\n      filterFn = (item: T) => value(get(item, byPath));\n    } else {\n      filterFn = (item: T) => isEqual(get(item, byPath), value);\n    }\n  } else {\n    filterFn = (item: T) => !!get(item, byPath);\n  }\n\n  return array.filter(filterFn);\n}\n\nexport default helper(filterBy);\n"],"names":["filterBy","byPath","value","array","isPresent","isEmberArray","undefined","asArray","isEmpty","filterFn","item","get","isEqual","filter","helper"],"mappings":";;;;;;;AAOO,SAASA,QAAQA,CAAsC,CAC5DC,MAAM,EACNC,KAAK,EACLC,KAAK,CAC4B,EAAE;EACnC,IAAIC,SAAS,GAAG,IAAI;EACpB,IAAI,CAACC,OAAY,CAACF,KAAK,CAAC,IAAIE,OAAY,CAACH,KAAK,CAAC,EAAE;AAC/CC,IAAAA,KAAK,GAAGD,KAAY;AACpBA,IAAAA,KAAK,GAAGI,SAAS;AACjBF,IAAAA,SAAS,GAAG,KAAK;AACnB;AAEAD,EAAAA,KAAK,GAAGI,OAAO,CAACJ,KAAK,CAAC;EAEtB,IAAIK,OAAO,CAACP,MAAM,CAAC,IAAIO,OAAO,CAACL,KAAK,CAAC,EAAE;AACrC,IAAA,OAAO,EAAE;AACX;AAEA,EAAA,IAAIM,QAAQ;AAEZ,EAAA,IAAIL,SAAS,EAAE;AACb,IAAA,IAAI,OAAOF,KAAK,KAAK,UAAU,EAAE;MAC/BO,QAAQ,GAAIC,IAAO,IAAKR,KAAK,CAACS,GAAG,CAACD,IAAI,EAAET,MAAM,CAAC,CAAC;AAClD,KAAC,MAAM;AACLQ,MAAAA,QAAQ,GAAIC,IAAO,IAAKE,OAAO,CAACD,GAAG,CAACD,IAAI,EAAET,MAAM,CAAC,EAAEC,KAAK,CAAC;AAC3D;AACF,GAAC,MAAM;IACLO,QAAQ,GAAIC,IAAO,IAAK,CAAC,CAACC,GAAG,CAACD,IAAI,EAAET,MAAM,CAAC;AAC7C;AAEA,EAAA,OAAOE,KAAK,CAACU,MAAM,CAACJ,QAAQ,CAAC;AAC/B;AAEA,iBAAeK,MAAM,CAACd,QAAQ,CAAC;;;;"}