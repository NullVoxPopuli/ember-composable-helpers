{"version":3,"file":"queue.js","sources":["../../src/helpers/queue.ts"],"sourcesContent":["import { helper } from '@ember/component/helper';\nimport isPromise from '../utils/is-promise.ts';\n\nfunction invokeMaybeNullable(\n  curr: (...args1: unknown[]) => void | null,\n  args: unknown[],\n) {\n  return curr == null ? undefined : curr(...args);\n}\n\nexport function queue(positional: unknown[] = []) {\n  const actions = positional as (() => void)[];\n\n  return function (...args: unknown[]) {\n    const invokeWithArgs = function (acc: unknown, curr: () => void) {\n      if (isPromise(acc)) {\n        return acc.then(() => invokeMaybeNullable(curr, args));\n      }\n\n      return invokeMaybeNullable(curr, args);\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n    return actions.reduce<unknown | Promise<unknown>>((acc, curr, idx) => {\n      if (idx === 0) {\n        return invokeMaybeNullable(curr, args);\n      }\n\n      return invokeWithArgs(acc, curr);\n    }, undefined);\n  };\n}\n\nexport default helper(queue);\n"],"names":["invokeMaybeNullable","curr","args","undefined","queue","positional","actions","invokeWithArgs","acc","isPromise","then","reduce","idx","helper"],"mappings":";;;AAGA,SAASA,mBAAmBA,CAC1BC,IAA0C,EAC1CC,IAAe,EACf;EACA,OAAOD,IAAI,IAAI,IAAI,GAAGE,SAAS,GAAGF,IAAI,CAAC,GAAGC,IAAI,CAAC;AACjD;AAEO,SAASE,KAAKA,CAACC,UAAqB,GAAG,EAAE,EAAE;EAChD,MAAMC,OAAO,GAAGD,UAA4B;EAE5C,OAAO,UAAU,GAAGH,IAAe,EAAE;AACnC,IAAA,MAAMK,cAAc,GAAG,UAAUC,GAAY,EAAEP,IAAgB,EAAE;AAC/D,MAAA,IAAIQ,SAAS,CAACD,GAAG,CAAC,EAAE;QAClB,OAAOA,GAAG,CAACE,IAAI,CAAC,MAAMV,mBAAmB,CAACC,IAAI,EAAEC,IAAI,CAAC,CAAC;AACxD;AAEA,MAAA,OAAOF,mBAAmB,CAACC,IAAI,EAAEC,IAAI,CAAC;KACvC;;AAED;IACA,OAAOI,OAAO,CAACK,MAAM,CAA6B,CAACH,GAAG,EAAEP,IAAI,EAAEW,GAAG,KAAK;MACpE,IAAIA,GAAG,KAAK,CAAC,EAAE;AACb,QAAA,OAAOZ,mBAAmB,CAACC,IAAI,EAAEC,IAAI,CAAC;AACxC;AAEA,MAAA,OAAOK,cAAc,CAACC,GAAG,EAAEP,IAAI,CAAC;KACjC,EAAEE,SAAS,CAAC;GACd;AACH;AAEA,cAAeU,MAAM,CAACT,KAAK,CAAC;;;;"}